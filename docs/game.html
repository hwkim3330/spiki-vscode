<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>스피키 다마고치 - Spiki Tamagotchi</title>
    <link rel="stylesheet" href="game.css">

    <!-- Hammer.js for Touch Gestures -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>

    <!-- Particles.js for Visual Effects -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="game-header">
            <h1>🐾 스피키 다마고치</h1>
            <div class="header-info">
                <div class="level-badge">Lv. <span id="level">1</span></div>
                <div class="spiki-count">스피키 × <span id="spiki-count">1</span></div>
            </div>
        </header>

        <!-- Stats -->
        <section class="stats">
            <div class="stat">
                <span class="stat-label">💖 행복</span>
                <div class="stat-bar">
                    <div class="stat-fill happiness" id="happiness-bar" style="width: 100%"></div>
                </div>
                <span class="stat-value" id="happiness-value">100</span>
            </div>
            <div class="stat">
                <span class="stat-label">🍰 포만</span>
                <div class="stat-bar">
                    <div class="stat-fill hunger" id="hunger-bar" style="width: 100%"></div>
                </div>
                <span class="stat-value" id="hunger-value">100</span>
            </div>
            <div class="stat">
                <span class="stat-label">⚡ 에너지</span>
                <div class="stat-bar">
                    <div class="stat-fill energy" id="energy-bar" style="width: 100%"></div>
                </div>
                <span class="stat-value" id="energy-value">100</span>
            </div>

            <!-- EXP Bar -->
            <div class="stat exp-stat">
                <span class="stat-label">✨ EXP</span>
                <div class="stat-bar">
                    <div class="stat-fill exp" id="exp-bar" style="width: 0%"></div>
                </div>
                <span class="stat-value exp-text"><span id="exp">0</span>/<span id="exp-max">100</span></span>
            </div>
        </section>

        <!-- Character Area -->
        <section class="character-area" id="character-area">
            <div class="speech-bubble" id="speech">
                <span id="speech-text">안녕하세요!</span>
            </div>
            <div class="effects" id="effects"></div>
            <!-- Particles Background -->
            <div id="particles-js" style="position: absolute; width: 100%; height: 100%; z-index: 1;"></div>
        </section>

        <!-- Action Buttons -->
        <section class="actions" style="grid-template-columns: repeat(4, 1fr);">
            <button class="action-btn" id="feed-btn" title="밥주기 (클릭)">🍰</button>
            <button class="action-btn" id="play-btn" title="놀아주기 (클릭)">⭐</button>
            <button class="action-btn" id="pet-btn" title="쓰다듬기 (클릭)">💕</button>
            <button class="action-btn" id="sleep-btn" title="재우기 (클릭)">💤</button>
        </section>

        <!-- Special Activity Buttons -->
        <section class="actions" style="grid-template-columns: repeat(4, 1fr);">
            <button class="action-btn pumpkin-btn" id="pumpkin-btn" title="호박 먹이기 (클릭)">🎃</button>
            <button class="action-btn clean-btn" id="clean-btn" title="청소하기 (클릭)">🧹</button>
            <button class="action-btn multiply-btn" id="multiply-btn" title="증식 (클릭)">🌟</button>
            <button class="action-btn music-btn" id="music-btn" title="음악 재생 (클릭)">🎵</button>
        </section>

        <!-- Advanced Controls Row -->
        <section class="actions" style="grid-template-columns: repeat(4, 1fr);">
            <button class="action-btn" id="voice-btn" title="음성 명령 (말하기)">🎤</button>
            <button class="action-btn" id="photo-btn" title="사진 찍기">📸</button>
            <button class="action-btn" id="shake-btn" title="흔들기 감지">📳</button>
            <button class="action-btn" id="settings-btn" title="설정">⚙️</button>
        </section>

        <!-- Control Hints -->
        <div class="coding-tip" id="coding-tip">
            💡 팁: 스피키를 드래그, 더블클릭, 길게 누르기, 스와이프 해보세요!
        </div>

        <!-- Audio Test (Debug) -->
        <div style="text-align: center; padding: 10px; font-size: 12px; color: rgba(255,255,255,0.7);">
            <button id="audio-test-btn">
                🔊 오디오 테스트
            </button>
            <span id="audio-status"></span>
        </div>
    </div>

    <!-- YouTube Panel (Modal) -->
    <div class="youtube-panel" id="youtube-panel">
        <div class="youtube-header">
            <span>🎵 음악 재생</span>
            <button class="close-btn" id="close-youtube">✕</button>
        </div>

        <div class="youtube-presets">
            <button class="preset-btn" data-video="jfKfPfyJRdk">로파이 ☕</button>
            <button class="preset-btn" data-video="5qap5aO4i9A">재즈 🎷</button>
            <button class="preset-btn" data-video="DWcJFNfaw9c">클래식 🎹</button>
            <button class="preset-btn" data-video="EcEMX-63PKA">빗소리 🌧️</button>
            <button class="preset-btn" data-video="wAPCSnAhhC8">파도 🌊</button>
            <button class="preset-btn" data-video="lTRiuFIWV54">새소리 🐦</button>
        </div>

        <div class="youtube-input">
            <input type="text" id="youtube-url" placeholder="YouTube URL 또는 Video ID 입력">
            <button id="play-youtube">재생</button>
        </div>

        <div class="youtube-controls">
            <button id="stop-youtube" style="padding: 10px 20px; background: #FF3B30; color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600;">⏹ 정지</button>
        </div>

        <div class="youtube-player" id="youtube-container"></div>
    </div>

    <!-- Settings Panel -->
    <div class="youtube-panel" id="settings-panel" style="display: none;">
        <div class="youtube-header">
            <span>⚙️ 설정</span>
            <button class="close-btn" id="close-settings">✕</button>
        </div>

        <div style="display: flex; flex-direction: column; gap: 16px;">
            <label style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.05); border-radius: 12px;">
                <span style="font-weight: 600;">🔊 소리 효과</span>
                <input type="checkbox" id="sound-toggle" checked style="width: 20px; height: 20px; cursor: pointer;">
            </label>

            <label style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.05); border-radius: 12px;">
                <span style="font-weight: 600;">📳 진동</span>
                <input type="checkbox" id="vibration-toggle" checked style="width: 20px; height: 20px; cursor: pointer;">
            </label>

            <label style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.05); border-radius: 12px;">
                <span style="font-weight: 600;">🔔 알림</span>
                <input type="checkbox" id="notification-toggle" checked style="width: 20px; height: 20px; cursor: pointer;">
            </label>

            <label style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.05); border-radius: 12px;">
                <span style="font-weight: 600;">🌟 자동 증식</span>
                <input type="checkbox" id="auto-multiply-toggle" checked style="width: 20px; height: 20px; cursor: pointer;">
            </label>

            <label style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.05); border-radius: 12px;">
                <span style="font-weight: 600;">✨ 파티클 효과</span>
                <input type="checkbox" id="particles-toggle" checked style="width: 20px; height: 20px; cursor: pointer;">
            </label>

            <button id="reset-game" style="padding: 14px; background: #FF3B30; color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; margin-top: 10px;">
                🔄 게임 초기화
            </button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
